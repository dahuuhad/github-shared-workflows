name: Release and Tag (Using Shared Workflow)

on:
  workflow_dispatch:
    inputs:
      version:
        description: 'Release version (e.g., 1.0.0 - without v prefix)'
        required: true
        type: string
      release_type:
        description: 'Type of release'
        required: false
        default: 'release'
        type: choice
        options:
          - release
          - prerelease
          - draft
      release_notes:
        description: 'Custom release notes (optional - will auto-generate if empty)'
        required: false
        type: string

jobs:
  release:
    uses: dahuuhad/shared-workflows/.github/workflows/release.yml@main
    with:
      version: ${{ inputs.version }}
      release_type: ${{ inputs.release_type }}
      release_notes: ${{ inputs.release_notes }}
      python_version: '3.14'
      package_name: 'stocks'
      run_tests: true
      test_command: 'bin/stocks --help && python -c "import stocks; print(\"âœ“ Package imports successfully\")"'